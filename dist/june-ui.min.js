/*!
 *  
 *  june-ui v0.2.9 
 *  流程模块公用组件库 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["june-ui"]=t():e["june-ui"]=t()}(window,function(){return r={},a.m=n=[function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("antd/es/form")},function(e,t){e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},function(e,t){e.exports=require("antd/es/select")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("antd/es/button")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("antd/es/input")},function(e,t){e.exports=require("@ant-design/icons")},function(e,t){e.exports=require("antd/es/col")},function(e,t){e.exports=require("antd/es/form/style/css")},function(e,t){e.exports=require("lodash.debounce")},function(e,t){e.exports=require("antd/es/message")},function(e,t){e.exports=require("antd/es/modal")},function(e,t){e.exports=require("antd/es/button/style/css")},function(e,t){e.exports=require("antd/es/input/style/css")},function(e,t){e.exports=require("antd/es/select/style/css")},function(e,t){e.exports=require("antd/es/tabs")},function(e,t){e.exports=require("bpmn-js/lib/NavigatedViewer")},function(e,t){e.exports=require("antd/es/message/style/css")},function(e,t){e.exports=require("antd/es/modal/style/css")},function(e,t){e.exports=require("antd/es/table")},function(e,t){e.exports=require("antd/es/spin")},function(e,t){e.exports=require("antd/es/row")},function(e,t){e.exports=require("antd/es/table/style/css")},function(e,t){e.exports=require("antd/es/tabs/style/css")},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=require("antd/es/spin/style/css")},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=require("antd/es/row/style/css")},function(e,t){e.exports=require("antd/es/col/style/css")},function(e,t,n){"use strict";n.r(t),n.d(t,"Alert",function(){return a}),n.d(t,"CommonTable",function(){return A}),n.d(t,"FlowTabs",function(){return me}),n.d(t,"TabPane",function(){return pe}),n.d(t,"FlowList",function(){return E}),n.d(t,"FlowListOwn",function(){return x}),n.d(t,"FlowRecord",function(){return ge}),n.d(t,"FlowViewer",function(){return Oe}),n.d(t,"FlowDetail",function(){return C}),n.d(t,"FlowActionButtons",function(){return Ee}),n.d(t,"FlowTransferModal",function(){return xe}),n.d(t,"FlowFullScreen",function(){return je});var r=n(5),ae=n.n(r),oe=n(0),ce=n.n(oe);var a=function(e){e.children,e.kink;var t=ae()(e,["children","kink"]);return Object(oe.useEffect)(function(){return console.log("%cjune-ui Alert mounted!","font-size: 18px;"),function(){}},[]),ce.a.createElement("div",t,e.children)},o=(n(28),n(25)),q=n.n(o),c=n(7),ie=n.n(c),i=n(9),D=n.n(i),u=n(1),ue=n.n(u),s=n(3),se=n.n(s),l=n(2),le=n.n(l),d=n(15),N=n.n(d);function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function A(e){var b=e.api,y=e.request,h=e.afterFetchData,t=e.queryParams,w=void 0===t?{}:t,n=ae()(e,["api","request","afterFetchData","queryParams"]),r=Object(oe.useState)(!1),a=le()(r,2),o=a[0],k=a[1],c=Object(oe.useState)(1),i=le()(c,2),u=i[0],s=i[1],l=Object(oe.useState)(10),d=le()(l,2),f=d[0],p=d[1],m=Object(oe.useState)([]),v=le()(m,2),g=v[0],O=v[1],E=Object(oe.useState)(0),x=le()(E,2),j=x[0],T=x[1];Object(oe.useEffect)(function(){1<u&&s(1)},[w]),Object(oe.useEffect)(function(){return I(w,u,f),function(){}},[w,u,f]);function P(e,t){s(e),p(t)}var I=function(){var e=se()(ue.a.mark(function e(){var t,n,r,a=arguments;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<a.length&&void 0!==a[0]?a[0]:w,n=1<a.length&&void 0!==a[1]?a[1]:u,r=2<a.length&&void 0!==a[2]?a[2]:f,y)return k(!0),e.next=7,C(t,n,r);e.next=7;break;case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),C=N()(function(){var r=se()(ue.a.mark(function e(t,n,r){var a,o,c,i,u,s,l,d,f,p,m,v;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"function"==typeof b?(u=b({page:n,size:r}),s=u.url,l=ae()(u,["url"]),c=s,i=l):c=b,e.next=4,y({method:"POST",url:c,data:F(F({},w),i)});case 4:d=e.sent,f=(null==d||null===(a=d.data)||void 0===a?void 0:a.data)||{},v=void 0===(m=f.total)?0:m,O(void 0===(p=f.records)?[]:p),T(v),k(!1),h&&h(null==d||null===(o=d.data)||void 0===o?void 0:o.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),k(!1),console.log("flow-list fetch failed;",e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(e,t,n){return r.apply(this,arguments)}}(),300),S={loading:o,dataSource:g,pagination:{current:u,total:j,pageSize:f,onChange:P,onShowSizeChange:P}};return e.render?e.render(F({},S)):ce.a.createElement(q.a,ie()({},S,n))}var p=n(10),de=n.n(p),m=(n(14),n(4)),fe=n.n(m),v=(n(29),n(21)),b=n.n(v),pe=b.a.TabPane;function me(e){var t=e.children,n=ae()(e,["children"]);return ce.a.createElement(b.a,n,t)}n(18);var y=n(8),h=n.n(y),w=(n(19),n(11)),ve=n.n(w),k=(n(20),n(6)),be=n.n(k),g=n(12);function R(e){var n=e.labelKey,r=e.valueKey,t=e.onSearch,a=e.options,o=void 0===a?[]:a;return ce.a.createElement("div",{className:"flow-search-bar"},ce.a.createElement(fe.a,{name:"horizontal_login",layout:"inline",onFinish:function(e){t&&t(e)}},ce.a.createElement(fe.a.Item,{label:"流程分类",name:"processDefKey"},ce.a.createElement(be.a,{allowClear:!0,placeholder:"请选择分类",style:{minWidth:192}},o.map(function(e,t){return ce.a.createElement(be.a.Option,{key:t,value:e[r]||e.dataValue},e[n]||e.name)}))),ce.a.createElement(fe.a.Item,{label:"标题",name:"title"},ce.a.createElement(ve.a,{suffix:ce.a.createElement(g.SearchOutlined,null),placeholder:"关键字搜索"})),ce.a.createElement(fe.a.Item,{shouldUpdate:!0,noStyle:!0},function(){return ce.a.createElement(h.a,{type:"primary",htmlType:"submit",ghost:!0},"搜索")})))}n(30),n(31);var O={dictList:function(e){return"/caas/dict/listByCode/".concat(e)},dictProcessList:function(){return O.dictList("flowDefine")},dictProcessOwnKeys:function(){return"/caas/osoBpmProcInst/listInterestKeys"},userList:function(e){return"/caas/user/list?keyWord=".concat(e)},taskTransfer:function(){return"/caas/osoBpmTask/transferTask"}},B=O;function L(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function E(n){var e,r=this,a=n.onTabChange,o=(n.renderTabs,n.renderContent,n.TableComponent,n.TabsComponent),c=n.request,i=(n.listApi,n.onLinkClick),t=(n.data,n.tabProps),u=void 0===t?{}:t,s=(ae()(n,["onTabChange","renderTabs","renderContent","TableComponent","TabsComponent","request","listApi","onLinkClick","data","tabProps"]),Object(oe.useRef)({all:function(e,t){return{url:"/caas/osoBpmProcInst/completedProcPersonPage/".concat(e,"/").concat(t)}},wait:function(e,t){return{url:"/caas/osoBpmTask/waitTaskPage/".concat(e,"/").concat(t)}},accept:function(e,t){return{url:"/caas/osoBpmTask/completedTaskPage/".concat(e,"/").concat(t)}},done:function(e,t){return{url:"/caas/osoBpmProcInst/completedProcPersonPage/".concat(e,"/").concat(t),finishFlag:!0}}})),l=Object(oe.useRef)([{name:"待审批",key:"wait",total:0},{name:"已审批",key:"accept",total:0}]),d=Object(oe.useRef)(),f=fe.a.useForm(),p=(le()(f,1)[0],Object(oe.useState)(null==l||null===(e=l.current[0])||void 0===e?void 0:e.key)),m=le()(p,2),v=m[0],b=m[1],y=Object(oe.useState)([]),h=le()(y,2),w=h[0],k=h[1],g=Object(oe.useState)({}),O=le()(g,2),E=O[0],x=O[1],j=Object(oe.useState)("procInstId"),T=le()(j,2),P=(T[0],T[1]),I=Object(oe.useState)(""),C=le()(I,2)[1];Object(oe.useEffect)(function(){return F(),function(){}},[]);function S(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.total,r=(t.records,l.current.find(function(e){return e.key===v}));r&&(r.total=n),P(/^wait$|^accept$/g.test(v)?"taskId":"procInstId"),C((new Date).getTime())}function q(e){x(e)}var N=function(){var t=se()(ue.a.mark(function e(t){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b(t),x(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},E)),"function"==typeof a&&a(t);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),F=function(){var e=se()(ue.a.mark(function e(){var t;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c)return e.prev=1,e.next=4,c({method:"GET",url:B.dictProcessList()});e.next=11;break;case 4:t=e.sent,k(t.data.data||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}();return ce.a.createElement("div",{className:"flow-list",ref:d},function(){var e;if("function"==typeof n.renderTabs)return n.renderTabs(n);var t=o||me;return ce.a.createElement(t,ie()({defaultActiveKey:v,onChange:N,tabBarExtraContent:ce.a.createElement(je,{el:d})},u),null===(e=l.current)||void 0===e?void 0:e.map(function(e){return ce.a.createElement(pe,{tab:"".concat(e.name,"（").concat(e.value?e.value+"/":"").concat(e.total,"）"),key:e.key})}))}(),"function"==typeof n.renderSearch?n.renderSearch(n):ce.a.createElement(R,{onSearch:q,options:w}),function(){if("function"==typeof n.renderContent)return n.renderContent(n);function e(e){var t=0<arguments.length&&void 0!==e?e:[];return[{title:"流程标题",dataIndex:"title",key:"title",width:200},{title:"创建人",dataIndex:"createdByName",key:"createdByName",width:110}].concat(de()(t),[{title:"操作",dataIndex:"",key:"operations",fixed:"right",align:"center",width:80,render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ce.a.createElement("a",{onClick:null==i?void 0:i.bind.apply(i,[r].concat(t))},"查看")}}])}return ce.a.createElement("div",{className:"flow-list-main"},"wait"===v?ce.a.createElement(A,{rowKey:"taskId",columns:e([{title:"审批节点",dataIndex:"taskName",key:"taskName",width:180},,{title:"审批人",dataIndex:"auditorUserNames",key:"auditorUserNames",width:110},{title:"流程创建日期",dataIndex:"procCreateTime",key:"procCreateTime",width:200},{title:"任务创建日期",dataIndex:"taskCreateTime",key:"taskCreateTime",width:200}]),request:c,queryParams:E,api:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.page,r=t.size;return s.current[v](n,r)},afterFetchData:S}):null,"accept"===v?ce.a.createElement(A,{rowKey:"taskId",columns:e([{title:"状态",dataIndex:"stateDesc",key:"stateDesc",width:100},{title:"审批节点",dataIndex:"taskName",key:"taskName",width:180},{title:"审批人",dataIndex:"auditorNames",key:"auditorNames",width:110},{title:"流程创建日期",dataIndex:"procCreateTime",key:"procCreateTime",width:200},{title:"任务创建日期",dataIndex:"taskCreateTime",key:"taskCreateTime",width:200},{title:"流程结束日期",dataIndex:"procEndDate",key:"procEndDate",width:200}]),request:c,queryParams:E,api:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.page,r=t.size;return s.current[v](n,r)},afterFetchData:S}):null)}())}function x(e){var r=this,n=(e.onTabChange,e.renderTabs,e.renderContent,e.TableComponent,e.TabsComponent,e.request),a=(e.listApi,e.onLinkClick),t=(e.data,e.tabProps,ae()(e,["onTabChange","renderTabs","renderContent","TableComponent","TabsComponent","request","listApi","onLinkClick","data","tabProps"]),Object(oe.useRef)()),o=Object(oe.useState)([]),c=le()(o,2),i=c[0],u=c[1],s=Object(oe.useState)({}),l=le()(s,2),d=l[0],f=l[1];Object(oe.useEffect)(function(){return m(),function(){}},[]);function p(e){f(e)}var m=function(){var e=se()(ue.a.mark(function e(){var t;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.prev=1,e.next=4,n({method:"POST",url:B.dictProcessOwnKeys()});e.next=11;break;case 4:t=e.sent,u(t.data.data||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}();return ce.a.createElement("div",{className:"flow-list",ref:t},"function"==typeof e.renderSearch?e.renderSearch(e):ce.a.createElement(R,{onSearch:p,options:i,labelKey:"prodDefDesc",valueKey:"prodDefKey"}),function(){if("function"==typeof e.renderContent)return e.renderContent(e);return ce.a.createElement("div",{className:"flow-list-main"},ce.a.createElement(A,{rowKey:"procInstId",columns:function(e){var t=0<arguments.length&&void 0!==e?e:[];return[{title:"流程标题",dataIndex:"title",key:"title",width:200}].concat(de()(t),[{title:"操作",dataIndex:"",key:"operations",fixed:"right",align:"center",width:80,render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ce.a.createElement("a",{onClick:null==a?void 0:a.bind.apply(a,[r].concat(t))},"查看")}}])}([{title:"状态",dataIndex:"stateDesc",key:"stateDesc",width:100},{title:"发起人",dataIndex:"createdByName",key:"createdByName",width:100},{title:"审批节点",dataIndex:"currentNodeNames",key:"currentNodeNames",width:200},{title:"审批人",dataIndex:"auditorNames",key:"auditorNames",width:200},{title:"流程发起时间",dataIndex:"procCreateTime",key:"procCreateTime",width:200},{title:"任务创建时间",dataIndex:"currentFirstTaskCreatedTime",key:"currentFirstTaskCreatedTime",width:200},{title:"结束日期",dataIndex:"procEndTime",key:"procEndTime",width:200}]),request:n,queryParams:d,api:function(e){var t,n=0<arguments.length&&void 0!==e?e:{},r=n.page,a=n.size;return t=a,{url:"/caas/osoBpmProcInst/getInterestProcInstPage/".concat(r,"/").concat(t)}}}))}())}n(32);var j=n(26),ye=n.n(j),T=(n(23),n(16)),he=n.n(T),P=(n(24),n(17)),we=n.n(P);n(33),n(34),n(35),n(36);function I(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function C(a){var t=a.onTabChange,s=a.onReqSuccess,o=a.renderTabs,n=a.renderApprove,e=a.renderInfo,r=a.renderHeader,c=a.TabsComponent,i=a.onOkSuccess,u=a.onRejectSuccess,l=a.onTransferSuccess,d=a.data,f=a.id,p=a.request,m=a.tabs,v=void 0===m?[]:m,b=a.tabProps,y=void 0===b?{}:b,h=ae()(a,["onTabChange","onReqSuccess","renderTabs","renderApprove","renderInfo","renderHeader","TabsComponent","onOkSuccess","onRejectSuccess","onTransferSuccess","data","id","request","tabs","tabProps"]),w=Object(oe.useState)(!1),k=le()(w,2),g=(k[0],k[1],Object(oe.useState)(!1)),O=le()(g,2),E=O[0],x=O[1],j=Object(oe.useState)({}),T=le()(j,2),P=T[0],I=T[1],C=Object(oe.useState)(""),S=le()(C,2),q=S[0],N=S[1],F=Object(oe.useState)([]),D=le()(F,2),A=D[0],R=D[1],B=Object(oe.useState)(!1),L=le()(B,2),M=L[0],K=L[1],_=Object(oe.useRef)(),V=we.a.useModal(),z=le()(V,2),U=z[0],G=z[1];Object(oe.useEffect)(function(){return f&&!d&&ee(f),function(){}},[f]),Object(oe.useEffect)(function(){return d&&I(d),function(){}},[d]);function H(e){t&&t(e)}function W(){x(!0)}function X(){return{title:"确认!",content:"同意该流程?",okText:"确定",cancelText:"取消"}}function $(e){N(e.approveRemark)}var J=fe.a.useForm(),Q=le()(J,1)[0],Y=Object(oe.useRef)({getDetail:function(e){return{url:"/caas/osoBpmProcInst/getFlowDetailByProcInstId/".concat(e)}},postApprove:function(){return{url:"/caas/osoBpmTask/approve"}}}),Z=Object(oe.useRef)([{name:"审批信息",key:"approve_form",render:e},{name:"审批日志",key:"approve_records",render:function(e,t){return ce.a.createElement(ge,{data:t})}},{name:"流程图",key:"task_viewer",render:function(e,t){return ce.a.createElement(Oe,{data:t})}}].concat(de()(v))),ee=function(){var t=se()(ue.a.mark(function e(t){var n,r,a,o,c,i,u;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p)return e.prev=1,K(!0),a=Y.current.getDetail(t),o=a.url,e.next=6,p({method:"GET",url:o});e.next=21;break;case 6:c=e.sent,i=null==c||null===(n=c.data)||void 0===n?void 0:n.data,I(i),s&&s(i),1===(u=(null==i||null===(r=i.runTimeTasks)||void 0===r?void 0:r.filter(function(e){return e.approveFlag}))||[]).length&&Q.setFieldsValue({taskId:u[0].taskId}),R(u),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:return e.prev=18,K(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[1,15,18,21]])}));return function(e){return t.apply(this,arguments)}}(),te=function(){var e=se()(ue.a.mark(function e(){var r;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.validateFields();case 3:r=e.sent,console.log(r),U.confirm(ke(ke({},X()),{},{content:"同意该流程?",onOk:function(){return new Promise(function(){var n=se()(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re("AGREE",r);case 3:"function"==typeof i&&i(),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}())}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=se()(ue.a.mark(function e(){var r;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.validateFields();case 3:r=e.sent,U.confirm(ke(ke({},X()),{},{content:"驳回该流程?",onOk:function(){return new Promise(function(){var n=se()(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re("REJECT",r);case 3:"function"==typeof u&&u(),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}())}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),re=function(){var n=se()(ue.a.mark(function e(t,n){var r,a,o,c,i;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Y.current.postApprove(),o=a.url,e.next=4,p({method:"POST",url:o,data:ke({status:t},n)});case 4:return c=e.sent,i=null==c||null===(r=c.data)||void 0===r?void 0:r.data,he.a.success(i),Q.resetFields(),N(""),ee(f),e.abrupt("return",Promise.resolve());case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(e,t){return n.apply(this,arguments)}}();return ce.a.createElement("div",{className:"flow-detail",ref:_},ce.a.createElement(ye.a,{spinning:M},!1===P.approveFlag?null:"function"==typeof r?r(a):ce.a.createElement("div",{className:"flow-detail-header"},ce.a.createElement("div",{className:"flow-detail-top"},ce.a.createElement("div",{className:"flow-detail-title"},P&&P.title),ce.a.createElement(je,{el:_})),ce.a.createElement("div",{className:"flow-approve"},function(){if("function"==typeof n)return n();var e=A.length<=1;return ce.a.createElement("div",{className:"flow-approve-detault"},ce.a.createElement(fe.a,ie()({labelCol:{span:2},wrapperCol:{span:22}},{form:Q,style:{width:"100%"},name:"flow-detail-default",onValuesChange:$}),ce.a.createElement(fe.a.Item,{style:{display:e?"none":""},label:"流程节点",name:"taskId",rules:[{required:!e,message:"请选择流程节点"}]},ce.a.createElement(be.a,{disabled:e,placeholder:"选择流程节点"},null==A?void 0:A.map(function(e,t){return ce.a.createElement(be.a.Option,{key:t,value:e.taskId},"".concat(e.nodeName," - ").concat(e.userNames))}))),ce.a.createElement(fe.a.Item,{label:"备注说明：",name:"approveRemark",rules:[{required:!0,message:"请输入备注说明!"}]},ce.a.createElement(ve.a.TextArea,{placeholder:"请输入备注说明"}))))}()),ce.a.createElement(Ee,ie()({data:P,onTransfer:W,onAgree:te,onReject:ne,canApprove:A.length},h))),function(){var e,t,n;if("function"==typeof o)return o(a);var r=c||me;return ce.a.createElement(r,ie()({defaultActiveKey:null==Z||null===(e=Z.current[0])||void 0===e?void 0:e.key,onChange:H},y),null===(t=Z.current)||void 0===t||null===(n=t.filter(function(e){return e.render}))||void 0===n?void 0:n.map(function(e){return ce.a.createElement(pe,{tab:e.name,key:e.key},e.render&&e.render(e,P))}))}(),ce.a.createElement(xe,{visible:E,remark:q,setRemark:N,runTimeTasks:(null==P?void 0:P.runTimeTasks)||[],onOk:function(){ee(f),x(!1),Q.setFieldsValue({approveRemark:""}),"function"==typeof l&&l()},request:p,onCancel:function(){x(!1)},onModelFormChange:function(e){Q.setFieldsValue({approveRemark:e.reason})}}),G))}function ge(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:props).data,n=void 0===t?{}:t;return Object(oe.useEffect)(function(){return function(){}},[n]),ce.a.createElement("div",{className:"flow-record"},null==n||null===(e=n.historyTasks)||void 0===e?void 0:e.map(function(e,t){var n,r;return ce.a.createElement("div",{key:t,className:"flow-record-item"},ce.a.createElement("div",{className:"flow-record-item-label"},null===(n=e.createdTime)||void 0===n||null===(r=n.split(" "))||void 0===r?void 0:r.map(function(e,t){return ce.a.createElement("div",{className:"flow-record-item-text",key:t},e)})),ce.a.createElement("div",{className:"flow-record-item-mark"},ce.a.createElement("div",{className:"flow-mark-circle"})),ce.a.createElement("div",{className:"flow-record-item-content"},ce.a.createElement("div",{className:"flow-item-content-title"},e.nodeName),ce.a.createElement("div",{className:"flow-item-content-row"},ce.a.createElement("div",{className:"flow-item-row-label"},"意见："),ce.a.createElement("div",{className:"flow-item-row-val"},e.stateDesc)),ce.a.createElement("div",{className:"flow-item-content-row"},ce.a.createElement("div",{className:"flow-item-row-label"},"备注："),ce.a.createElement("div",{className:"flow-item-row-val"},e.remark)),ce.a.createElement("div",{className:"flow-item-content-row"},ce.a.createElement("div",{className:"flow-item-row-label"},"附件："),ce.a.createElement("div",{className:"flow-item-row-attachments"},e.attachments&&e.attachments.map(function(e,t){return"IMAGE"!==e.fileType?ce.a.createElement("div",{key:t,className:"flow-attachments-link"},ce.a.createElement("a",{href:e.fileUrl,target:"_blank"},e.fileName)):ce.a.createElement("div",{key:t,className:"flow-attachments-image"},ce.a.createElement("img",{src:e.fileUrl,alt:""}))})))))}))}var S=n(22),M=n.n(S);function K(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(){return(V=se()(ue.a.mark(function e(t,n){var r,a,o,c,i,u,s,l,d,f,p,m,v,b,y,h,w;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=document.getElementById(t))&&n.flowXml){e.next=3;break}return e.abrupt("return");case 3:return r.innerHTML="",a=new M.a({container:"#".concat(t),height:"600px"}),o=n.flowXml||"",e.prev=6,e.next=9,a.importXML(o);case 9:i=e.sent,i.warnings,u=a.get("overlays"),(s=a.get("canvas")).zoom("fit-viewport"),null==n||null===(c=n.historyNodeId)||void 0===c||c.split(","),l=n.historyTasks,d=void 0===l?[]:l,f=n.runTimeTasks,p=void 0===f?[]:f,m=K(d);try{for(m.s();!(v=m.n()).done;)"reject"===(b=v.value).state?s.addMarker(b.nodeId,"errorHighlight"):s.addMarker(b.nodeId,"endHighlight"),U.call(u,b.nodeId,z(d,b.nodeId))}catch(e){m.e(e)}finally{m.f()}y=K(p);try{for(y.s();!(h=y.n()).done;)w=h.value,s.addMarker(w.nodeId,"highlight"),U.call(u,w.nodeId,z(p,w.nodeId))}catch(e){y.e(e)}finally{y.f()}e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),console.log(e.t0.message,e.t0.warnings);case 25:case"end":return e.stop()}},e,null,[[6,22]])}))).apply(this,arguments)}function z(e,t){var n,r=[],a=K(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.nodeId===t&&r.push('<div class="note-card">\n        <p>执行人：'.concat((null==o?void 0:o.assigneeUserName)||(null==o?void 0:o.userNames)||"","</p>\n        <p>开始时间：").concat((null==o?void 0:o.createdTime)||"","</p>\n        ").concat(null!=o&&o.endTime?"<p>结束时间：".concat(null==o?void 0:o.endTime,"</p>"):"","\n        ").concat(null!=o&&o.stateDesc?"<p>意见：".concat(null==o?void 0:o.stateDesc,"</p>"):"","\n      </div>"))}}catch(e){a.e(e)}finally{a.f()}return'<div class="diagram-note">'.concat(r.join(""),"</div>")}function U(e,t){var n,r=this;G(e,"onmouseenter",function(){n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'<div class="diagram-note">Mixed up the labels?</div>';return this.add(e,{position:{bottom:0,right:0},scale:!1,html:t})}.call(r,e,t)}),G(e,"onmouseleave",function(){r.remove(n),n=void 0})}function G(e,t,n){document.querySelector("[data-element-id=".concat(e,"]"))[t]=n}var Oe=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:props).data;return Object(oe.useEffect)(function(){return e&&function(e,t){V.apply(this,arguments)}("flow_container",e),function(){}},[e]),ce.a.createElement("div",{className:"flow-viewer"},ce.a.createElement("div",{id:"flow_container"}))},H=(n(37),n(27)),W=n.n(H),X=(n(38),n(13)),$=n.n(X);function Ee(e){var t=e.onAgree,n=e.onReject,r=e.onTransfer,a=e.canApprove,o=e.data,c=void 0===o?{}:o,i=e.prefix,u=void 0===i?[]:i,s=e.addon,l=void 0===s?[]:s;return ce.a.createElement("div",{className:"flow-action-buttons"},ce.a.createElement(W.a,{gutter:12},u.map(function(e,t){return ce.a.createElement($.a,{key:t},e)}),ce.a.createElement($.a,null,ce.a.createElement(h.a,{type:"primary",ghost:!0,onClick:r,disabled:!a},"转办")),ce.a.createElement($.a,null,ce.a.createElement(h.a,{type:"primary",ghost:!0,onClick:t,disabled:!a||c.completeFlag||!1===c.approveFlag},"同意")),ce.a.createElement($.a,null,ce.a.createElement(h.a,{danger:!0,onClick:n,disabled:!a||c.completeFlag||!1===c.approveFlag},"驳回")),l.map(function(e,t){return ce.a.createElement($.a,{key:t},e)})))}function J(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var Q={labelCol:{span:4},wrapperCol:{span:18}};function xe(e){var t=e.visible,n=e.remark,o=(e.setRemark,e.request),r=e.onOk,a=e.onCancel,c=e.onModelFormChange,i=e.runTimeTasks,u=void 0===i?[]:i,s=fe.a.useForm(),l=le()(s,1)[0],d=Object(oe.useState)([]),f=le()(d,2),p=f[0],m=f[1],v=Object(oe.useState)(!1),b=le()(v,2),y=b[0],h=b[1];Object(oe.useEffect)(function(){return function(){}},[t]),Object(oe.useEffect)(function(){return l.setFieldsValue({reason:n}),function(){}},[n]),Object(oe.useEffect)(function(){var e;return u.length&&l.setFieldsValue({taskIds:[null===(e=u[0])||void 0===e?void 0:e.taskId]}),function(){}},[u]);var w=function(){var e=se()(ue.a.mark(function e(){var t,n;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o)return e.prev=1,h(!0),e.next=5,l.validateFields();e.next=21;break;case 5:return t=e.sent,e.next=8,o({method:"POST",url:B.taskTransfer(),data:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t)});case 8:n=e.sent,console.log("values:",t),l.resetFields(),he.a.success(n.data.data),"function"==typeof r&&r(t),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("Failed:",e.t0);case 18:return e.prev=18,h(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[1,15,18,21]])}));return function(){return e.apply(this,arguments)}}(),k=N()(function(){var t=se()(ue.a.mark(function e(t){var n,r,a;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o)return e.next=4,o({method:"GET",url:B.userList(t)});e.next=7;break;case 4:r=e.sent,a=null==r||null===(n=r.data)||void 0===n?void 0:n.data,m(a);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Failed:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),300);return ce.a.createElement(we.a,{title:"流程转办",visible:t,onOk:w,onCancel:a,cancelText:"取消",okText:"确定",confirmLoading:y},ce.a.createElement(fe.a,ie()({},Q,{form:l,name:"basic",initialValues:{remember:!0},onValuesChange:function(e){c&&c(e)}}),ce.a.createElement(fe.a.Item,{label:"转办人",name:"targetUserId",rules:[{required:!0,message:"请选择转办人"}]},ce.a.createElement(be.a,{showSearch:!0,placeholder:"选择转办人",optionFilterProp:"children",onSearch:k},p.map(function(e,t){return ce.a.createElement(be.a.Option,{key:t,value:e.id},"".concat(e.name," - ").concat(e.login))}))),ce.a.createElement(fe.a.Item,{label:"流程节点",name:"taskIds",rules:[{required:!0,message:"请选择流程节点"}]},ce.a.createElement(be.a,{mode:"multiple",placeholder:"选择流程节点"},u.map(function(e,t){return ce.a.createElement(be.a.Option,{key:t,value:e.taskId},"".concat(e.nodeName," - ").concat(e.userNames))}))),ce.a.createElement(fe.a.Item,{label:"转办理由",name:"reason",rules:[{required:!0,message:"请输入转办理由"}]},ce.a.createElement(ve.a.TextArea,{rows:4,placeholder:"请输入转办理由"}))))}function je(e){var t=this,n=e.el,r=Object(oe.useState)(!1),a=le()(r,2),o=a[0],c=a[1];Object(oe.useEffect)(function(){return document.addEventListener("fullscreenchange",i.bind(t)),function(){document.removeEventListener("fullscreenchange",i.bind(t))}},[]);var i=function(){console.log("change"),c(null!==document.fullscreenElement)};return o?ce.a.createElement(h.a,{icon:ce.a.createElement(g.FullscreenExitOutlined,null),onClick:function(){document.exitFullscreen()}},"退出"):ce.a.createElement(h.a,{icon:ce.a.createElement(g.FullscreenOutlined,null),onClick:function(){n.current.requestFullscreen()}},"全屏")}t.default={Alert:a,CommonTable:A,FlowTabs:me,TabPane:pe,FlowList:E,FlowListOwn:x,FlowRecord:ge,FlowViewer:Oe,FlowDetail:C,FlowActionButtons:Ee,FlowTransferModal:xe,FlowFullScreen:je}}],a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=39);function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var n,r});
//# sourceMappingURL=june-ui.min.js.map