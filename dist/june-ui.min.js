/*!
 *  
 *  june-ui v0.2.1 
 *  流程模块公用组件库 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["june-ui"]=t():e["june-ui"]=t()}(window,function(){return r={},a.m=n=[function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("antd/es/form")},function(e,t){e.exports=require("antd/es/select")},function(e,t){e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},function(e,t){e.exports=require("antd/es/button")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("antd/es/input")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@ant-design/icons")},function(e,t){e.exports=require("antd/es/col")},function(e,t){e.exports=require("antd/es/message")},function(e,t){e.exports=require("antd/es/modal")},function(e,t){e.exports=require("antd/es/button/style/css")},function(e,t){e.exports=require("antd/es/input/style/css")},function(e,t){e.exports=require("antd/es/select/style/css")},function(e,t){e.exports=require("antd/es/form/style/css")},function(e,t){e.exports=require("antd/es/tabs")},function(e,t){e.exports=require("bpmn-js/lib/NavigatedViewer")},function(e,t){e.exports=require("antd/es/message/style/css")},function(e,t){e.exports=require("antd/es/modal/style/css")},function(e,t){e.exports=require("antd/es/table")},function(e,t){e.exports=require("antd/es/spin")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("antd/es/row")},function(e,t){e.exports=require("lodash.debounce")},function(e,t){e.exports=require("antd/es/table/style/css")},function(e,t){e.exports=require("antd/es/tabs/style/css")},function(e,t,n){},function(e,t){e.exports=require("antd/es/spin/style/css")},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=require("antd/es/row/style/css")},function(e,t){e.exports=require("antd/es/col/style/css")},function(e,t,n){"use strict";n.r(t),n.d(t,"Alert",function(){return a}),n.d(t,"FlowTabs",function(){return me}),n.d(t,"TabPane",function(){return pe}),n.d(t,"FlowList",function(){return w}),n.d(t,"FlowRecord",function(){return Ee}),n.d(t,"FlowViewer",function(){return Oe}),n.d(t,"FlowDetail",function(){return T}),n.d(t,"FlowActionButtons",function(){return xe}),n.d(t,"FlowTransferModal",function(){return je}),n.d(t,"FlowFullScreen",function(){return Te});var r=n(6),re=n.n(r),ae=n(0),oe=n.n(ae);var a=function(e){e.children,e.kink;var t=re()(e,["children","kink"]);return Object(ae.useEffect)(function(){return console.log("%cjune-ui Alert mounted!","font-size: 18px;"),function(){}},[]),oe.a.createElement("div",t,e.children)},o=(n(15),n(7)),ee=n.n(o),c=(n(16),n(9)),ce=n.n(c),i=(n(17),n(5)),ie=n.n(i),l=(n(28),n(23)),te=n.n(l),u=n(8),le=n.n(u),s=n(10),k=n.n(s),f=n(1),ue=n.n(f),d=n(3),se=n.n(d),p=(n(18),n(4)),fe=n.n(p),m=n(2),de=n.n(m),v=(n(29),n(19)),b=n.n(v),pe=b.a.TabPane;function me(e){var t=e.children,n=re()(e,["children"]);return oe.a.createElement(b.a,n,t)}n(30);var ne=n(11);var y={dictList:function(e){return"/caas/dict/listByCode/".concat(e)},dictProcessList:function(){return y.dictList("flowDefine")},userList:function(e){return"/caas/user/list?keyWord=".concat(e)},taskTransfer:function(){return"/caas/osoBpmTask/transferTask"}},ve=y;function h(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){k()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function w(n){var e,r=this,a=n.onTabChange,o=(n.renderTabs,n.renderContent,n.TableComponent),c=n.TabsComponent,b=n.request,i=(n.listApi,n.onLinkClick),t=n.tabProps,l=void 0===t?{}:t,u=re()(n,["onTabChange","renderTabs","renderContent","TableComponent","TabsComponent","request","listApi","onLinkClick","tabProps"]),y=Object(ae.useRef)({all:function(e,t){return{url:"/caas/osoBpmProcInst/completedProcPersonPage/".concat(e,"/").concat(t)}},wait:function(e,t){return{url:"/caas/osoBpmTask/waitTaskPage/".concat(e,"/").concat(t)}},accept:function(e,t){return{url:"/caas/osoBpmTask/completedTaskPage/".concat(e,"/").concat(t)}},done:function(e,t){return{url:"/caas/osoBpmProcInst/completedProcPersonPage/".concat(e,"/").concat(t),finishFlag:!0}}}),h=Object(ae.useRef)([{name:"全部",key:"all",total:0,value:0},{name:"待审批",key:"wait",total:0},{name:"已审批",key:"accept",total:0},{name:"已完结",key:"done",total:0}]),s=(Object(ae.useRef)({}),Object(ae.useRef)()),f=fe.a.useForm(),d=de()(f,1)[0],p=Object(ae.useState)(null==h||null===(e=h.current[0])||void 0===e?void 0:e.key),m=de()(p,2),v=m[0],w=m[1],g=Object(ae.useState)(1),k=de()(g,2),E=k[0],O=k[1],x=Object(ae.useState)(10),j=de()(x,2),T=j[0],P=j[1],S=Object(ae.useState)(0),F=de()(S,2),I=F[0],q=F[1],C=Object(ae.useState)([]),N=de()(C,2),A=N[0],D=N[1],R=Object(ae.useState)([]),M=de()(R,2),B=M[0],L=M[1],_=Object(ae.useState)({}),V=de()(_,2),G=V[0],U=V[1],z=Object(ae.useState)(!1),H=de()(z,2),K=H[0],W=H[1],X=Object(ae.useState)("");de()(X,2)[1];Object(ae.useEffect)(function(){return Y(),function(){}},[]),Object(ae.useEffect)(function(){Z(v,G,E,T)},[v,G,T,E]);function J(e,t){O(e),P(t)}function $(e){U(e),O(1)}var Q=function(){var t=se()(ue.a.mark(function e(t){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O(1),w(t),"function"==typeof a&&a(t);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),Y=function(){var e=se()(ue.a.mark(function e(){var t;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b)return e.prev=1,e.next=4,b({method:"GET",url:ve.dictProcessList()});e.next=11;break;case 4:t=e.sent,L(t.data.data||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),Z=function(){var t=se()(ue.a.mark(function e(t){var n,r,a,o,c,i,l,u,s,f,d,p,m,v=arguments;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<v.length&&void 0!==v[1]?v[1]:G,r=2<v.length&&void 0!==v[2]?v[2]:E,a=3<v.length&&void 0!==v[3]?v[3]:T,b)return e.prev=4,W(!0),o=y.current[t](r,a),c=o.url,i=re()(o,["url"]),e.next=9,b({method:"POST",url:c,data:be(be({},n),i)});e.next=23;break;case 9:l=e.sent,u=l.data.data,s=u.records,f=void 0===s?[]:s,d=u.total,p=void 0===d?0:d,(m=h.current.find(function(e){return e.key===t}))&&(m.total=p),"wait"===t&&(h.current[0].value=p),D(f),q(p),W(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),W(!1),console.log("flow-list fetch failed;",e.t0);case 23:case"end":return e.stop()}},e,null,[[4,19]])}));return function(e){return t.apply(this,arguments)}}();return oe.a.createElement("div",{className:"flow-list",ref:s},function(){var e;if("function"==typeof n.renderTabs)return n.renderTabs(n);var t=c||me;return oe.a.createElement(t,le()({defaultActiveKey:v,onChange:Q,tabBarExtraContent:oe.a.createElement(Te,{el:s})},l),null===(e=h.current)||void 0===e?void 0:e.map(function(e){return oe.a.createElement(pe,{tab:"".concat(e.name,"（").concat(e.value?e.value+"/":"").concat(e.total,"）"),key:e.key})}))}(),function(){if("function"==typeof n.renderContent)return n.renderContent(n);var e=[{title:"流程标题",dataIndex:"title",key:"title",width:200},{title:"状态",dataIndex:"stateDesc",key:"stateDesc",width:100},{title:"发起人",dataIndex:"createdBy",key:"createdBy",width:100},{title:"审批节点",dataIndex:"currentNodeNames",key:"currentNodeNames",width:200},{title:"审批人",dataIndex:"auditorNames",key:"auditorNames",width:200},{title:"流程发起时间",dataIndex:"procCreateTime",key:"procCreateTime",width:200},{title:"任务创建时间",dataIndex:"currentFirstTaskCreatedTime",key:"currentFirstTaskCreatedTime",width:200},{title:"结束日期",dataIndex:"procEndTime",key:"procEndTime",width:200},{title:"操作",dataIndex:"",key:"operations",fixed:"right",align:"center",width:80,render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oe.a.createElement("a",{onClick:null==i?void 0:i.bind.apply(i,[r].concat(t))},"查看")}}],t=o||te.a;return oe.a.createElement("div",{className:"flow-list-main"},oe.a.createElement("div",{className:"flow-search-bar"},oe.a.createElement(fe.a,{form:d,name:"horizontal_login",layout:"inline",onFinish:$},oe.a.createElement(fe.a.Item,{label:"流程分类",name:"processDefKey"},oe.a.createElement(ie.a,{placeholder:"请选择分类",style:{minWidth:192}},B.map(function(e,t){return oe.a.createElement(ie.a.Option,{key:t,value:e.dataValue},e.name)}))),oe.a.createElement(fe.a.Item,{label:"标题",name:"title"},oe.a.createElement(ce.a,{suffix:oe.a.createElement(ne.SearchOutlined,null),placeholder:"关键字搜索"})),oe.a.createElement(fe.a.Item,{shouldUpdate:!0,noStyle:!0},function(){return oe.a.createElement(ee.a,{type:"primary",htmlType:"submit",ghost:!0},"搜索")}))),oe.a.createElement(t,le()({rowKey:"procInstId",loading:K,columns:e,dataSource:A,pagination:{current:E,total:I,pageSize:T,onChange:J,onShowSizeChange:J}},u)))}())}n(31);var g=n(24),ye=n.n(g),E=(n(21),n(13)),he=n.n(E),O=n(25),we=n.n(O),x=(n(22),n(14)),ge=n.n(x);n(32),n(33),n(34),n(35);function j(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(e){k()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function T(a){var t=a.onTabChange,o=a.renderTabs,e=a.renderApprove,n=a.renderInfo,r=a.renderHeader,c=a.TabsComponent,i=a.onOkSuccess,l=a.onRejectSuccess,u=a.onTransferSuccess,s=a.data,f=a.id,d=a.request,p=a.tabs,m=void 0===p?[]:p,v=a.tabProps,b=void 0===v?{}:v,y=re()(a,["onTabChange","renderTabs","renderApprove","renderInfo","renderHeader","TabsComponent","onOkSuccess","onRejectSuccess","onTransferSuccess","data","id","request","tabs","tabProps"]),h=Object(ae.useState)(!1),w=de()(h,2),g=(w[0],w[1],Object(ae.useState)(!1)),k=de()(g,2),E=k[0],O=k[1],x=Object(ae.useState)({}),j=de()(x,2),T=j[0],P=j[1],S=Object(ae.useState)(""),F=de()(S,2),I=F[0],q=F[1],C=Object(ae.useState)([]),N=de()(C,2),A=N[0],D=N[1],R=Object(ae.useState)(!1),M=de()(R,2),B=M[0],L=M[1],_=Object(ae.useRef)(),V=ge.a.useModal(),G=de()(V,2),U=G[0],z=G[1];Object(ae.useEffect)(function(){return f&&!s&&Z(f),function(){}},[f]),Object(ae.useEffect)(function(){return s&&P(s),function(){}},[s]);function H(e){t&&t(e)}function K(){O(!0)}function W(){return{title:"确认!",content:"同意该流程?",okText:"确定",cancelText:"取消"}}function X(e){q(e.approveRemark)}var J=fe.a.useForm(),$=de()(J,1)[0],Q=Object(ae.useRef)({getDetail:function(e){return{url:"/caas/osoBpmProcInst/getFlowDetailByProcInstId/".concat(e)}},postApprove:function(){return{url:"/caas/osoBpmTask/approve"}}}),Y=Object(ae.useRef)([{name:"审批信息",key:"approve_form",render:n},{name:"审批日志",key:"approve_records",render:function(e,t){return oe.a.createElement(Ee,{data:t})}},{name:"流程图",key:"task_viewer",render:function(e,t){return oe.a.createElement(Oe,{data:t})}}].concat(we()(m))),Z=function(){var t=se()(ue.a.mark(function e(t){var n,r,a,o,c,i;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d)return e.prev=1,L(!0),a=Q.current.getDetail(t),o=a.url,e.next=6,d({method:"GET",url:o});e.next=18;break;case 6:c=e.sent,i=null==c||null===(n=c.data)||void 0===n?void 0:n.data,P(i),D((null==i||null===(r=i.runTimeTasks)||void 0===r?void 0:r.filter(function(e){return e.approveFlag}))||[]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.prev=15,L(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[1,12,15,18]])}));return function(e){return t.apply(this,arguments)}}(),ee=function(){var e=se()(ue.a.mark(function e(){var r;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.validateFields();case 3:r=e.sent,U.confirm(ke(ke({},W()),{},{content:"同意该流程?",onOk:function(){return new Promise(function(){var n=se()(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne("AGREE",r);case 3:"function"==typeof i&&i(),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}())}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),te=function(){var e=se()(ue.a.mark(function e(){var r;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.validateFields();case 3:r=e.sent,U.confirm(ke(ke({},W()),{},{content:"驳回该流程?",onOk:function(){return new Promise(function(){var n=se()(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne("REJECT",r);case 3:"function"==typeof l&&l(),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}())}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),ne=function(){var n=se()(ue.a.mark(function e(t,n){var r,a,o,c,i;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Q.current.postApprove(),o=a.url,e.next=4,d({method:"POST",url:o,data:ke({status:t},n)});case 4:return c=e.sent,i=null==c||null===(r=c.data)||void 0===r?void 0:r.data,he.a.success(i),$.resetFields(),q(""),Z(f),e.abrupt("return",Promise.resolve());case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(e,t){return n.apply(this,arguments)}}();return oe.a.createElement("div",{className:"flow-detail",ref:_},oe.a.createElement(ye.a,{spinning:B},!1===T.approveFlag?null:"function"==typeof r?r(a):oe.a.createElement("div",{className:"flow-detail-header"},oe.a.createElement("div",{className:"flow-detail-top"},oe.a.createElement("div",{className:"flow-detail-title"},T&&T.title),oe.a.createElement(Te,{el:_})),oe.a.createElement("div",{className:"flow-approve"},"function"==typeof e?e():oe.a.createElement("div",{className:"flow-approve-detault"},oe.a.createElement(fe.a,le()({labelCol:{span:2},wrapperCol:{span:22}},{form:$,style:{width:"100%"},name:"flow-detail-default",onValuesChange:X}),oe.a.createElement(fe.a.Item,{label:"流程节点",name:"taskId",rules:[{required:!0,message:"请选择流程节点"}]},oe.a.createElement(ie.a,{placeholder:"选择流程节点"},null==A?void 0:A.map(function(e,t){return oe.a.createElement(ie.a.Option,{key:t,value:e.taskId},"".concat(e.nodeName," - ").concat(e.userNames))}))),oe.a.createElement(fe.a.Item,{label:"备注说明：",name:"approveRemark",rules:[{required:!0,message:"请输入备注说明!"}]},oe.a.createElement(ce.a.TextArea,{placeholder:"请输入备注说明"}))))),oe.a.createElement(xe,le()({data:T,onTransfer:K,onAgree:ee,onReject:te,canApprove:A.length},y))),function(){var e,t,n;if("function"==typeof o)return o(a);var r=c||me;return oe.a.createElement(r,le()({defaultActiveKey:null==Y||null===(e=Y.current[0])||void 0===e?void 0:e.key,onChange:H},b),null===(t=Y.current)||void 0===t||null===(n=t.filter(function(e){return e.render}))||void 0===n?void 0:n.map(function(e){return oe.a.createElement(pe,{tab:e.name,key:e.key},e.render&&e.render(e,T))}))}(),oe.a.createElement(je,{visible:E,remark:I,setRemark:q,runTimeTasks:(null==T?void 0:T.runTimeTasks)||[],onOk:function(){Z(f),O(!1),$.setFieldsValue({approveRemark:""}),"function"==typeof u&&u()},request:d,onCancel:function(){O(!1)},onModelFormChange:function(e){$.setFieldsValue({approveRemark:e.reason})}}),z))}function Ee(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:props).data,n=void 0===t?{}:t;return Object(ae.useEffect)(function(){return function(){}},[n]),oe.a.createElement("div",{className:"flow-record"},null==n||null===(e=n.historyTasks)||void 0===e?void 0:e.map(function(e,t){var n,r;return oe.a.createElement("div",{key:t,className:"flow-record-item"},oe.a.createElement("div",{className:"flow-record-item-label"},null===(n=e.createdTime)||void 0===n||null===(r=n.split(" "))||void 0===r?void 0:r.map(function(e,t){return oe.a.createElement("div",{className:"flow-record-item-text",key:t},e)})),oe.a.createElement("div",{className:"flow-record-item-mark"},oe.a.createElement("div",{className:"flow-mark-circle"})),oe.a.createElement("div",{className:"flow-record-item-content"},oe.a.createElement("div",{className:"flow-item-content-title"},e.nodeName),oe.a.createElement("div",{className:"flow-item-content-row"},oe.a.createElement("div",{className:"flow-item-row-label"},"意见："),oe.a.createElement("div",{className:"flow-item-row-val"},e.stateDesc)),oe.a.createElement("div",{className:"flow-item-content-row"},oe.a.createElement("div",{className:"flow-item-row-label"},"备注："),oe.a.createElement("div",{className:"flow-item-row-val"},e.remark)),oe.a.createElement("div",{className:"flow-item-content-row"},oe.a.createElement("div",{className:"flow-item-row-label"},"附件："),oe.a.createElement("div",{className:"flow-item-row-attachments"},e.attachments&&e.attachments.map(function(e,t){return"IMAGE"!==e.fileType?oe.a.createElement("div",{key:t,className:"flow-attachments-link"},oe.a.createElement("a",{href:e.fileUrl,target:"_blank"},e.fileName)):oe.a.createElement("div",{key:t,className:"flow-attachments-image"},oe.a.createElement("img",{src:e.fileUrl,alt:""}))})))))}))}var P=n(20),S=n.n(P);function F(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(){return(q=se()(ue.a.mark(function e(t,n){var r,a,o,c,i,l,u,s,f,d,p,m,v,b,y,h,w;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=document.getElementById(t))&&n.flowXml){e.next=3;break}return e.abrupt("return");case 3:return r.innerHTML="",a=new S.a({container:"#".concat(t),height:"600px"}),o=n.flowXml||"",e.prev=6,e.next=9,a.importXML(o);case 9:i=e.sent,i.warnings,l=a.get("overlays"),(u=a.get("canvas")).zoom("fit-viewport"),null==n||null===(c=n.historyNodeId)||void 0===c||c.split(","),s=n.historyTasks,f=void 0===s?[]:s,d=n.runTimeTasks,p=void 0===d?[]:d,m=F(f);try{for(m.s();!(v=m.n()).done;)"reject"===(b=v.value).state?u.addMarker(b.nodeId,"errorHighlight"):u.addMarker(b.nodeId,"endHighlight"),N.call(l,b.nodeId,C(f,b.nodeId))}catch(e){m.e(e)}finally{m.f()}y=F(p);try{for(y.s();!(h=y.n()).done;)w=h.value,u.addMarker(w.nodeId,"highlight"),N.call(l,w.nodeId,C(p,w.nodeId))}catch(e){y.e(e)}finally{y.f()}e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),console.log(e.t0.message,e.t0.warnings);case 25:case"end":return e.stop()}},e,null,[[6,22]])}))).apply(this,arguments)}function C(e,t){var n,r=[],a=F(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.nodeId===t&&r.push('<div class="note-card">\n        <p>执行人：'.concat((null==o?void 0:o.assigneeUserName)||(null==o?void 0:o.userNames)||"","</p>\n        <p>开始时间：").concat((null==o?void 0:o.createdTime)||"","</p>\n        ").concat(null!=o&&o.endTime?"<p>结束时间：".concat(null==o?void 0:o.endTime,"</p>"):"","\n        ").concat(null!=o&&o.stateDesc?"<p>意见：".concat(null==o?void 0:o.stateDesc,"</p>"):"","\n      </div>"))}}catch(e){a.e(e)}finally{a.f()}return'<div class="diagram-note">'.concat(r.join(""),"</div>")}function N(e,t){var n,r=this;A(e,"onmouseenter",function(){n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'<div class="diagram-note">Mixed up the labels?</div>';return this.add(e,{position:{bottom:0,right:0},scale:!1,html:t})}.call(r,e,t)}),A(e,"onmouseleave",function(){r.remove(n),n=void 0})}function A(e,t,n){document.querySelector("[data-element-id=".concat(e,"]"))[t]=n}var Oe=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:props).data;return Object(ae.useEffect)(function(){return e&&function(e,t){q.apply(this,arguments)}("flow_container",e),function(){}},[e]),oe.a.createElement("div",{className:"flow-viewer"},oe.a.createElement("div",{id:"flow_container"}))},D=(n(36),n(26)),R=n.n(D),M=(n(37),n(12)),B=n.n(M);function xe(e){var t=e.onAgree,n=e.onReject,r=e.onTransfer,a=e.canApprove,o=e.data,c=void 0===o?{}:o,i=e.prefix,l=void 0===i?[]:i,u=e.addon,s=void 0===u?[]:u;return oe.a.createElement("div",{className:"flow-action-buttons"},oe.a.createElement(R.a,{gutter:12},l.map(function(e,t){return oe.a.createElement(B.a,{key:t},e)}),oe.a.createElement(B.a,null,oe.a.createElement(ee.a,{type:"primary",ghost:!0,onClick:r},"转办")),oe.a.createElement(B.a,null,oe.a.createElement(ee.a,{type:"primary",ghost:!0,onClick:t,disabled:!a||c.completeFlag||!1===c.approveFlag},"同意")),oe.a.createElement(B.a,null,oe.a.createElement(ee.a,{danger:!0,onClick:n,disabled:!a||c.completeFlag||!1===c.approveFlag},"驳回")),s.map(function(e,t){return oe.a.createElement(B.a,{key:t},e)})))}var L=n(27),_=n.n(L);function V(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var G={labelCol:{span:4},wrapperCol:{span:18}};function je(e){var t=e.visible,n=e.remark,o=(e.setRemark,e.request),r=e.onOk,a=e.onCancel,c=e.onModelFormChange,i=e.runTimeTasks,l=void 0===i?[]:i,u=fe.a.useForm(),s=de()(u,1)[0],f=Object(ae.useState)([]),d=de()(f,2),p=d[0],m=d[1],v=Object(ae.useState)(!1),b=de()(v,2),y=b[0],h=b[1];Object(ae.useEffect)(function(){return function(){}},[t]),Object(ae.useEffect)(function(){return s.setFieldsValue({reason:n}),function(){}},[n]),Object(ae.useEffect)(function(){var e;return l.length&&s.setFieldsValue({taskIds:[null===(e=l[0])||void 0===e?void 0:e.taskId]}),function(){}},[l]);var w=function(){var e=se()(ue.a.mark(function e(){var t,n;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o)return e.prev=1,h(!0),e.next=5,s.validateFields();e.next=21;break;case 5:return t=e.sent,e.next=8,o({method:"POST",url:ve.taskTransfer(),data:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(e){k()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t)});case 8:n=e.sent,console.log("values:",t),s.resetFields(),he.a.success(n.data.data),"function"==typeof r&&r(t),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("Failed:",e.t0);case 18:return e.prev=18,h(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[1,15,18,21]])}));return function(){return e.apply(this,arguments)}}(),g=_()(function(){var t=se()(ue.a.mark(function e(t){var n,r,a;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o)return e.next=4,o({method:"GET",url:ve.userList(t)});e.next=7;break;case 4:r=e.sent,a=null==r||null===(n=r.data)||void 0===n?void 0:n.data,m(a);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Failed:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),300);return oe.a.createElement(ge.a,{title:"流程转办",visible:t,onOk:w,onCancel:a,cancelText:"取消",okText:"确定",confirmLoading:y},oe.a.createElement(fe.a,le()({},G,{form:s,name:"basic",initialValues:{remember:!0},onValuesChange:function(e){c&&c(e)}}),oe.a.createElement(fe.a.Item,{label:"转办人",name:"targetUserId",rules:[{required:!0,message:"请选择转办人"}]},oe.a.createElement(ie.a,{showSearch:!0,placeholder:"选择转办人",optionFilterProp:"children",onSearch:g},p.map(function(e,t){return oe.a.createElement(ie.a.Option,{key:t,value:e.id},"".concat(e.name," - ").concat(e.login))}))),oe.a.createElement(fe.a.Item,{label:"流程节点",name:"taskIds",rules:[{required:!0,message:"请选择流程节点"}]},oe.a.createElement(ie.a,{mode:"multiple",placeholder:"选择流程节点"},l.map(function(e,t){return oe.a.createElement(ie.a.Option,{key:t,value:e.taskId},"".concat(e.nodeName," - ").concat(e.userNames))}))),oe.a.createElement(fe.a.Item,{label:"转办理由",name:"reason",rules:[{required:!0,message:"请输入转办理由"}]},oe.a.createElement(ce.a.TextArea,{rows:4,placeholder:"请输入转办理由"}))))}function Te(e){var t=this,n=e.el,r=Object(ae.useState)(!1),a=de()(r,2),o=a[0],c=a[1];Object(ae.useEffect)(function(){return document.addEventListener("fullscreenchange",i.bind(t)),function(){document.removeEventListener("fullscreenchange",i.bind(t))}},[]);var i=function(){console.log("change"),c(null!==document.fullscreenElement)};return o?oe.a.createElement(ee.a,{icon:oe.a.createElement(ne.FullscreenExitOutlined,null),onClick:function(){document.exitFullscreen()}},"退出"):oe.a.createElement(ee.a,{icon:oe.a.createElement(ne.FullscreenOutlined,null),onClick:function(){n.current.requestFullscreen()}},"全屏")}t.default={Alert:a,FlowTabs:me,TabPane:pe,FlowList:w,FlowRecord:Ee,FlowViewer:Oe,FlowDetail:T,FlowActionButtons:xe,FlowTransferModal:je,FlowFullScreen:Te}}],a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=38);function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var n,r});
//# sourceMappingURL=june-ui.min.js.map