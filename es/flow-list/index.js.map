{"version":3,"sources":["../../src/components/flow-list/index.jsx"],"names":["React","useEffect","useState","useRef","FlowTabs","TabPane","Table","Row","Col","Form","Input","Select","FlowList","props","onTabChange","renderTabs","renderContent","TableComponent","TabsComponent","request","listApi","tabProps","rest","_listApi","all","currentPage","pageSize","wait","accept","done","_onTabChange","key","tabs","name","current","active","setAcitve","_renderTabs","Tabs","map","d","_renderContent","columns","title","dataIndex","width","fixed","align","render","args","onClick","bind","data","age","address","_Table"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport FlowTabs, { TabPane } from \"../flow-tabs\";\r\nimport \"../flow-tabs/style\";\r\n\r\nimport { Table, Row, Col, Form, Input, Select } from 'antd';\r\n\r\nexport default function FlowList(props) {\r\n  const { onTabChange, renderTabs, renderContent, TableComponent, TabsComponent, request, listApi, tabProps = {}, ...rest } = props;\r\n\r\n  const _listApi = listApi || {\r\n    all: (currentPage, pageSize) => `/caas/osoBpmProcInst/completedProcPersonPage/${currentPage}/${pageSize}`,\r\n    wait: (currentPage, pageSize) => `/caas/osoBpmTask/waitTaskPage/${currentPage}/${pageSize}`,\r\n    accept: (currentPage, pageSize) => `/caas/osoBpmTask/completedTaskPage/${currentPage}/${pageSize}`,\r\n    done: (currentPage, pageSize) => `/caas/osoBpmProcInst/completedProcPersonPage/${currentPage}/${pageSize}`, // finishFlag: true\r\n  }\r\n\r\n  const _onTabChange = (key) => {\r\n    // console.log(key)\r\n    if (typeof onTabChange === 'function') onTabChange(key)\r\n  };\r\n\r\n  const tabs = useRef([\r\n    { name: \"全部（??/??）\", key: \"all\" },\r\n    { name: \"待审批（??）\", key: \"wait\" },\r\n    { name: \"已审批（??）\", key: \"accept\" },\r\n    { name: \"已完结（??）\", key: \"done\" },\r\n  ]);\r\n\r\n  const [active, setAcitve] = useState(tabs?.current[0]?.key);\r\n\r\n  const _renderTabs = () => {\r\n    if (typeof props.renderTabs === \"function\") return props.renderTabs(props);\r\n    const Tabs = TabsComponent || FlowTabs;\r\n    return (\r\n      <Tabs defaultActiveKey={active} onChange={_onTabChange} {...tabProps} >\r\n        {tabs.current?.map((d) => (\r\n          <TabPane tab={d.name} key={d.key}></TabPane>\r\n        ))}\r\n      </Tabs>\r\n    );\r\n  };\r\n\r\n  const _renderContent = () => {\r\n    if (typeof props.renderContent === \"function\")\r\n      return props.renderContent(props);\r\n    const columns = [\r\n      {\r\n        title: \"流程标题\",\r\n        dataIndex: \"title\",\r\n        key: \"title\",\r\n        width: 200,\r\n      },\r\n      {\r\n        title: \"状态\",\r\n        dataIndex: \"stateDesc\",\r\n        key: \"stateDesc\",\r\n        width: 100,\r\n      },\r\n      {\r\n        title: \"发起人\",\r\n        dataIndex: \"createdBy\",\r\n        key: \"createdBy\",\r\n        width: 100,\r\n      },\r\n      {\r\n        title: \"审批节点\",\r\n        dataIndex: \"currentNodeNames\",\r\n        key: \"currentNodeNames\",\r\n        width: 200,\r\n      },\r\n      {\r\n        title: \"审批人\",\r\n        dataIndex: \"auditorNames\",\r\n        key: \"auditorNames\",\r\n        width: 200,\r\n      },\r\n      {\r\n        title: \"流程发起时间\",\r\n        dataIndex: \"procCreateTime\",\r\n        key: \"procCreateTime\",\r\n        width: 200,\r\n      },\r\n\r\n      {\r\n        title: \"任务创建时间\",\r\n        dataIndex: \"currentFirstTaskCreatedTime\",\r\n        key: \"currentFirstTaskCreatedTime\",\r\n        width: 200,\r\n      },\r\n\r\n      {\r\n        title: \"结束日期\",\r\n        dataIndex: \"procEndTime\",\r\n        key: \"procEndTime\",\r\n        width: 200,\r\n      },\r\n\r\n      {\r\n        title: \"操作\",\r\n        dataIndex: \"\",\r\n        key: \"operations\",\r\n        fixed: \"right\",\r\n        align: 'center',\r\n        width: 80,\r\n        // align: 'right',\r\n        render: (...args) => (\r\n          <a onClick={props?.onClick?.bind(this, ...args)}>查看</a>\r\n        ),\r\n      },\r\n    ];\r\n\r\n    const data = [\r\n      { name: \"Jack\", age: 28, address: \"some where\", key: \"1\" },\r\n      { name: \"Rose\", age: 36, address: \"some where\", key: \"2\" },\r\n    ];\r\n\r\n    const _Table = TableComponent || Table;\r\n    \r\n    return (\r\n      <div className=\"flow-list-main\">\r\n        <_Table columns={columns} dataSource={data} {...rest} />\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"flow-list\">\r\n      {_renderTabs()}\r\n      {_renderContent()}\r\n    </div>\r\n  );\r\n}\r\n"],"file":"index.js"}