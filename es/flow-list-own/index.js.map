{"version":3,"sources":["../../src/components/flow-list-own/index.jsx"],"names":["React","useEffect","useState","useRef","FlowTabs","TabPane","FlowSearch","CommonTable","FlowFullScreen","api","FlowList","props","onTabChange","renderTabs","renderContent","TableComponent","TabsComponent","request","listApi","onLinkClick","data","tabProps","rest","el","options","setOptions","searchParams","setSearchParams","_api","currentPage","pageSize","url","_fetchOptions","method","dictProcessOwnKeys","res","console","log","_onSearch","values","_renderSearch","renderSearch","_renderContent","column1","title","dataIndex","key","width","columns","col","fixed","align","render","args","bind","page","size"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport FlowTabs, { TabPane } from \"../flow-tabs\";\r\nimport FlowSearch from \"../flow-list-section/flow-search\";\r\nimport { CommonTable, FlowFullScreen } from \"../index\";\r\n\r\nimport \"../flow-list/style/index\";\r\nimport \"../flow-list-section/style\";\r\n\r\nimport { Table, Row, Col, Form, Input, Select, Button } from \"antd\";\r\n\r\nimport api from \"../api\";\r\n\r\nexport default function FlowList(props) {\r\n  const {\r\n    onTabChange,\r\n    renderTabs,\r\n    renderContent,\r\n    TableComponent,\r\n    TabsComponent,\r\n    request,\r\n    listApi,\r\n    onLinkClick,\r\n    data,\r\n    tabProps = {},\r\n    ...rest\r\n  } = props;\r\n\r\n  const el = useRef();\r\n  const [options, setOptions] = useState([]); // 流程分类选项\r\n  const [searchParams, setSearchParams] = useState({});\r\n\r\n  const _api = (currentPage, pageSize) => ({\r\n    url: `/caas/osoBpmProcInst/getInterestProcInstPage/${currentPage}/${pageSize}`,\r\n  });\r\n\r\n  useEffect(() => {\r\n    _fetchOptions();\r\n    return () => {};\r\n  }, []);\r\n\r\n  const _fetchOptions = async () => {\r\n    if (request) {\r\n      try {\r\n        let res = await request({\r\n          method: \"POST\",\r\n          url: api.dictProcessOwnKeys(),\r\n        });\r\n        setOptions(res.data.data || []);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const _onSearch = (values) => {\r\n    setSearchParams(values);\r\n  };\r\n\r\n  const _renderSearch = () => {\r\n    if (typeof props.renderSearch === \"function\")\r\n      return props.renderSearch(props);\r\n    return (\r\n      <FlowSearch\r\n        onSearch={_onSearch}\r\n        options={options}\r\n        labelKey=\"prodDefDesc\"\r\n        valueKey=\"prodDefKey\"\r\n      />\r\n    );\r\n  };\r\n\r\n  const _renderContent = () => {\r\n    if (typeof props.renderContent === \"function\")\r\n      return props.renderContent(props);\r\n\r\n    const column1 = [\r\n      {\r\n        title: \"状态\",\r\n        dataIndex: \"stateDesc\",\r\n        key: \"stateDesc\",\r\n        width: 100,\r\n      },\r\n      {\r\n        title: \"发起人\",\r\n        dataIndex: \"createdByName\",\r\n        key: \"createdByName\",\r\n        width: 100,\r\n      },\r\n      {\r\n        title: \"审批节点\",\r\n        dataIndex: \"currentNodeNames\",\r\n        key: \"currentNodeNames\",\r\n        width: 200,\r\n      },\r\n      {\r\n        title: \"审批人\",\r\n        dataIndex: \"auditorNames\",\r\n        key: \"auditorNames\",\r\n        width: 200,\r\n      },\r\n      {\r\n        title: \"流程发起时间\",\r\n        dataIndex: \"procCreateTime\",\r\n        key: \"procCreateTime\",\r\n        width: 200,\r\n      },\r\n\r\n      {\r\n        title: \"任务创建时间\",\r\n        dataIndex: \"currentFirstTaskCreatedTime\",\r\n        key: \"currentFirstTaskCreatedTime\",\r\n        width: 200,\r\n      },\r\n\r\n      {\r\n        title: \"结束日期\",\r\n        dataIndex: \"procEndTime\",\r\n        key: \"procEndTime\",\r\n        width: 200,\r\n      },\r\n    ];\r\n\r\n    const columns = (col = []) => [\r\n      {\r\n        title: \"流程标题\",\r\n        dataIndex: \"title\",\r\n        key: \"title\",\r\n        width: 200,\r\n      },\r\n      ...col,\r\n      {\r\n        title: \"操作\",\r\n        dataIndex: \"\",\r\n        key: \"operations\",\r\n        fixed: \"right\",\r\n        align: \"center\",\r\n        width: 80,\r\n        // align: 'right',\r\n        render: (...args) => (\r\n          <a onClick={onLinkClick?.bind(this, ...args)}>查看</a>\r\n        ),\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <div className=\"flow-list-main\">\r\n        <CommonTable\r\n          rowKey=\"procInstId\"\r\n          columns={columns(column1)}\r\n          request={request}\r\n          queryParams={searchParams}\r\n          api={({ page, size } = {}) => _api(page, size)}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"flow-list\" ref={el}>\r\n      {_renderSearch()}\r\n      {_renderContent()}\r\n    </div>\r\n  );\r\n}\r\n"],"file":"index.js"}