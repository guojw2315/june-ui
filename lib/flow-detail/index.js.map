{"version":3,"sources":["../../src/components/flow-detail/index.jsx"],"names":["FlowDetail","props","onTabChange","renderTabs","renderApprove","renderInfo","renderHeader","TabsComponent","data","tabs","tabProps","rest","_onTabChange","key","_tabs","name","render","tabItem","_renderApprove","_renderHeader","title","_renderTabs","Tabs","FlowTabs","current","map","d"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport {\n  FlowViewer,\n  FlowRecord,\n  FlowTabs,\n  TabPane,\n  FlowActionButtons,\n} from \"../index\";\nimport \"../flow-viewer/style\";\nimport \"../flow-record/style\";\nimport \"../flow-action-buttons/style\";\nimport { Button, Row, Col, Input } from \"antd\";\n\nimport { FullscreenOutlined } from \"@ant-design/icons\";\n\nexport default function FlowDetail(props) {\n  const {\n    onTabChange,\n    renderTabs,\n    renderApprove,\n    renderInfo,\n    renderHeader,\n    TabsComponent,\n    data,\n    tabs = [],\n    tabProps = {},\n    ...rest\n  } = props;\n\n  const _onTabChange = (key) => {\n    // console.log(key)\n    onTabChange && onTabChange(key);\n  };\n\n  const _tabs = useRef([\n    {\n      name: \"审批信息\",\n      key: \"approve_form\",\n      render: (tabItem, data) => renderInfo && renderInfo(),\n    },\n    {\n      name: \"审批日志\",\n      key: \"approve_records\",\n      render: (tabItem, data) => <FlowRecord data={data} />,\n    },\n    {\n      name: \"流程图\",\n      key: \"task_viewer\",\n      render: (tabItem, data) => <FlowViewer data={data} />,\n    },\n    ...tabs,\n  ]);\n\n  const _renderApprove = () => {\n    if (typeof renderApprove === \"function\") return renderApprove();\n    return (\n      <div className=\"flow-approve-detault\">\n        <div className=\"flow-remark-label\">备注说明：</div>\n        <div className=\"flow-remark-field\">\n          <Input.TextArea placeholder=\"请输入\" />\n        </div>\n      </div>\n    );\n  };\n\n  const _renderHeader = () => {\n    if (typeof renderHeader === \"function\") return renderHeader(props);\n    return (\n      <div className=\"flow-detail-header\">\n        <div className=\"flow-detail-top\">\n          <div className=\"flow-detail-title\">{data.title}</div>\n          <Button icon={<FullscreenOutlined />}>全屏</Button>\n        </div>\n        <div className=\"flow-approve\">{_renderApprove()}</div>\n\n        <FlowActionButtons\n          data={data}\n          {...rest}\n        />\n      </div>\n    );\n  };\n\n  const _renderTabs = () => {\n    if (typeof renderTabs === \"function\") return renderTabs(props);\n    const Tabs = TabsComponent || FlowTabs;\n    return (\n      <Tabs\n        defaultActiveKey={_tabs?.current[1]?.key}\n        onChange={_onTabChange}\n        {...tabProps}\n      >\n        {_tabs.current?.map((d) => (\n          <TabPane tab={d.name} key={d.key}>\n            {d.render && d.render(d, data)}\n          </TabPane>\n        ))}\n      </Tabs>\n    );\n  };\n\n  return (\n    <div className=\"flow-detail\">\n      {_renderHeader()}\n      {_renderTabs()}\n    </div>\n  );\n}\n"],"file":"index.js"}