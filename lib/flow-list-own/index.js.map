{"version":3,"sources":["../../src/components/flow-list-own/index.jsx"],"names":["FlowList","props","onTabChange","renderTabs","renderContent","TableComponent","TabsComponent","request","listApi","onLinkClick","data","tabProps","rest","el","options","setOptions","searchParams","setSearchParams","_api","currentPage","pageSize","url","_fetchOptions","method","api","dictProcessOwnKeys","res","console","log","_onSearch","values","_renderSearch","renderSearch","_renderContent","column1","title","dataIndex","key","width","columns","col","fixed","align","render","args","bind","page","size"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport FlowTabs, { TabPane } from \"../flow-tabs\";\nimport FlowSearch from \"../flow-list-section/flow-search\";\nimport { CommonTable, FlowFullScreen } from \"../index\";\n\nimport \"../flow-list/style/index\";\nimport \"../flow-list-section/style\";\n\nimport { Table, Row, Col, Form, Input, Select, Button } from \"antd\";\n\nimport api from \"../api\";\n\nexport default function FlowList(props) {\n  const {\n    onTabChange,\n    renderTabs,\n    renderContent,\n    TableComponent,\n    TabsComponent,\n    request,\n    listApi,\n    onLinkClick,\n    data,\n    tabProps = {},\n    ...rest\n  } = props;\n\n  const el = useRef();\n  const [options, setOptions] = useState([]); // 流程分类选项\n  const [searchParams, setSearchParams] = useState({});\n\n  const _api = (currentPage, pageSize) => ({\n    url: `/caas/osoBpmProcInst/getInterestProcInstPage/${currentPage}/${pageSize}`,\n  });\n\n  useEffect(() => {\n    _fetchOptions();\n    return () => {};\n  }, []);\n\n  const _fetchOptions = async () => {\n    if (request) {\n      try {\n        let res = await request({\n          method: \"POST\",\n          url: api.dictProcessOwnKeys(),\n        });\n        setOptions(res.data.data || []);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n\n  const _onSearch = (values) => {\n    setSearchParams(values);\n  };\n\n  const _renderSearch = () => {\n    if (typeof props.renderSearch === \"function\")\n      return props.renderSearch(props);\n    return (\n      <FlowSearch\n        onSearch={_onSearch}\n        options={options}\n        labelKey=\"prodDefDesc\"\n        valueKey=\"prodDefKey\"\n      />\n    );\n  };\n\n  const _renderContent = () => {\n    if (typeof props.renderContent === \"function\")\n      return props.renderContent(props);\n\n    const column1 = [\n      {\n        title: \"状态\",\n        dataIndex: \"stateDesc\",\n        key: \"stateDesc\",\n        width: 100,\n      },\n      {\n        title: \"发起人\",\n        dataIndex: \"createdByName\",\n        key: \"createdByName\",\n        width: 100,\n      },\n      {\n        title: \"审批节点\",\n        dataIndex: \"currentNodeNames\",\n        key: \"currentNodeNames\",\n        width: 200,\n      },\n      {\n        title: \"审批人\",\n        dataIndex: \"auditorNames\",\n        key: \"auditorNames\",\n        width: 200,\n      },\n      {\n        title: \"流程发起时间\",\n        dataIndex: \"procCreateTime\",\n        key: \"procCreateTime\",\n        width: 200,\n      },\n\n      {\n        title: \"任务创建时间\",\n        dataIndex: \"currentFirstTaskCreatedTime\",\n        key: \"currentFirstTaskCreatedTime\",\n        width: 200,\n      },\n\n      {\n        title: \"结束日期\",\n        dataIndex: \"procEndTime\",\n        key: \"procEndTime\",\n        width: 200,\n      },\n    ];\n\n    const columns = (col = []) => [\n      {\n        title: \"流程标题\",\n        dataIndex: \"title\",\n        key: \"title\",\n        width: 200,\n      },\n      ...col,\n      {\n        title: \"操作\",\n        dataIndex: \"\",\n        key: \"operations\",\n        fixed: \"right\",\n        align: \"center\",\n        width: 80,\n        // align: 'right',\n        render: (...args) => (\n          <a onClick={onLinkClick?.bind(this, ...args)}>查看</a>\n        ),\n      },\n    ];\n\n    return (\n      <div className=\"flow-list-main\">\n        <CommonTable\n          rowKey=\"procInstId\"\n          columns={columns(column1)}\n          request={request}\n          queryParams={searchParams}\n          api={({ page, size } = {}) => _api(page, size)}\n        />\n      </div>\n    );\n  };\n  return (\n    <div className=\"flow-list\" ref={el}>\n      {_renderSearch()}\n      {_renderContent()}\n    </div>\n  );\n}\n"],"file":"index.js"}